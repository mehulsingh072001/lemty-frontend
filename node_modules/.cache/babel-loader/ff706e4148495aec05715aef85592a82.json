{"ast":null,"code":"var _jsxFileName = \"/home/lucifer/Projects/softwares/lemty/client/src/Pages/Campaigns/Create/CampaignSteps.js\",\n    _s = $RefreshSig$();\n\nimport Sidebar from \"../../../Components/Sidebar\";\nimport Topbar from \"../../../Components/Topbar\";\nimport ProgressBar from \"../../../Components/ProgressBar\";\nimport { useContext, useState, useEffect } from \"react\";\nimport { GlobalContext } from \"../../../GlobalProvider\";\nimport EmailEditor from \"../../../Components/Editor\";\nimport { EditorContext } from \"../../../EditorProvider\";\nimport StepSettingsModal from \"../../../Components/StepSettings/Modal\";\nimport ToggleSwitch from \"../../../Components/ToggleSwitch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CampaignSteps = props => {\n  _s();\n\n  const [editorOpen, setEditorOpen] = useContext(EditorContext);\n  const [modalOpen, setModalOpen] = useState(false);\n  const {\n    step\n  } = useContext(GlobalContext);\n  const [addStep, setAddStep] = step;\n  const [currentIndex, setCurrentIndex] = useState();\n  const [emailAdded, setEmailAdded] = useState(false);\n  const [daySetter, setDaySetter] = useState(0);\n  const [stepSetter, setStepSetter] = useState(0);\n  const [stepBtn, setBtn] = useState(true);\n  useEffect(() => {\n    newStep();\n  }, []);\n\n  function toggleEditor(index) {\n    setEditorOpen(!editorOpen);\n    setCurrentIndex(index);\n  }\n\n  function toggleModal() {\n    setModalOpen(!modalOpen);\n  }\n\n  function newStep() {\n    const data = {\n      stepNumber: stepSetter + 1,\n      day: daySetter + 1,\n      dayGap: daySetter + 1,\n      hour: 0,\n      hourGap: 0,\n      minute: 0,\n      minuteGap: 0,\n      mails: [],\n      days: [\"SUN\", \"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\"]\n    };\n    setAddStep(addStep => [...addStep, data]);\n    setDaySetter(daySetter + 1);\n    setStepSetter(stepSetter + 1);\n  }\n\n  const handleCallback = (subject, email_content) => {\n    const data = {\n      subject: subject,\n      email_content: email_content\n    };\n    let newArr = [...addStep];\n    addStep[currentIndex].mails.push(data);\n    setAddStep(newArr);\n    checkr(currentIndex);\n    setEmailAdded(!emailAdded);\n  };\n\n  function removeStep(index) {\n    const list = [...addStep];\n    list.splice(index, 1);\n    setDaySetter(daySetter - 1);\n    setStepSetter(stepSetter - 1);\n    list.forEach((e, i) => {\n      e.stepNumber = i + 1;\n      e.day = i + 1;\n      e.dayGap = i + 1;\n    });\n    console.log(list);\n    setAddStep(list);\n  }\n\n  const checkr = index => {\n    if (addStep[index].mails.length !== 0) {} else {\n      console.log(false);\n    }\n  };\n\n  const addStepBetween = index => {\n    const list = [...addStep];\n    const data = {\n      stepNumber: index + 1 + 1,\n      day: index + 1 + 1,\n      dayGap: index + 1 + 1,\n      hour: 0,\n      hourGap: 0,\n      minute: 0,\n      minuteGap: 0,\n      mails: []\n    };\n    list.splice(index + 1, 0, data);\n    list.forEach((e, i) => {\n      e.stepNumber = i + 1;\n      e.day = i + 1;\n      e.dayGap = i + 1;\n    });\n    setAddStep(list);\n    setDaySetter(daySetter + 1);\n    setStepSetter(stepSetter + 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"campaign-create\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), editorOpen === true ? /*#__PURE__*/_jsxDEV(EmailEditor, {\n      currentIndex: currentIndex,\n      handleCallback: handleCallback\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 28\n    }, this) : console.log('null'), /*#__PURE__*/_jsxDEV(Topbar, {\n      title: \"Campaigns\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"campaign-create__container\",\n      children: [/*#__PURE__*/_jsxDEV(ProgressBar, {\n        prevStep: props.prevStep,\n        nextStep: props.nextStep,\n        progress: props.progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), addStep.map((d, index) => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"timeline\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"campaign-create__container--step\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row-1__left\",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"title\",\n                  children: [\"Step \", d.stepNumber, \", Day \", d.day]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"campaign-create__container--step--settings\",\n                children: addStep[index].mails.length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row-1__right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row-1__right--item\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Assigned to: \", addStep[index].whichEmail]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 61\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row-1__right--item\",\n                    children: addStep[index].days.map(d => /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"days\",\n                      children: d\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      toggleModal();\n                      setCurrentIndex(index);\n                    },\n                    className: \"mail-setter row-1__right--item\",\n                    children: \"Step Settings\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 23\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-2\",\n              children: addStep[index].mails.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row-2__container\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleEditor(index),\n                  className: \"mail-setter\",\n                  children: \"Add Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 25\n                }, this), index === 0 ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeStep(index),\n                  className: \"remove-step\",\n                  children: \"Remove Step\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row-2__container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"email\",\n                  children: [/*#__PURE__*/_jsxDEV(ToggleSwitch, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"email__info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"head\",\n                      children: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"subject: body\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"options\",\n                  children: index === 0 ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => removeStep(index),\n                    className: \"delete\",\n                    children: \"Delete Step\"\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this), addStep.length !== index + 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => addStepBetween(index),\n            className: \"add-sec\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fas fa-plus-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 114\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 48\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: newStep,\n            className: \"add\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fas fa-plus\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 59\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 14\n        }, this)\n      }, void 0, false))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), modalOpen ? /*#__PURE__*/_jsxDEV(StepSettingsModal, {\n      toggler: toggleModal,\n      index: currentIndex\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CampaignSteps, \"EclNr/E8B1x2K9WyWoNxp6d5vuA=\");\n\n_c = CampaignSteps;\nexport default CampaignSteps;\n\nvar _c;\n\n$RefreshReg$(_c, \"CampaignSteps\");","map":{"version":3,"sources":["/home/lucifer/Projects/softwares/lemty/client/src/Pages/Campaigns/Create/CampaignSteps.js"],"names":["Sidebar","Topbar","ProgressBar","useContext","useState","useEffect","GlobalContext","EmailEditor","EditorContext","StepSettingsModal","ToggleSwitch","CampaignSteps","props","editorOpen","setEditorOpen","modalOpen","setModalOpen","step","addStep","setAddStep","currentIndex","setCurrentIndex","emailAdded","setEmailAdded","daySetter","setDaySetter","stepSetter","setStepSetter","stepBtn","setBtn","newStep","toggleEditor","index","toggleModal","data","stepNumber","day","dayGap","hour","hourGap","minute","minuteGap","mails","days","handleCallback","subject","email_content","newArr","push","checkr","removeStep","list","splice","forEach","e","i","console","log","length","addStepBetween","prevStep","nextStep","progress","map","d","whichEmail"],"mappings":"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","sourcesContent":["import Sidebar from \"../../../Components/Sidebar\"\nimport Topbar from \"../../../Components/Topbar\"\nimport ProgressBar from \"../../../Components/ProgressBar\"\nimport { useContext, useState, useEffect } from \"react\"\nimport { GlobalContext } from \"../../../GlobalProvider\"\nimport EmailEditor from \"../../../Components/Editor\"\nimport {EditorContext} from \"../../../EditorProvider\"\nimport StepSettingsModal from \"../../../Components/StepSettings/Modal\"\nimport ToggleSwitch from \"../../../Components/ToggleSwitch\"\n\nconst CampaignSteps = (props) => {\n  const [editorOpen, setEditorOpen] = useContext(EditorContext)\n  const [modalOpen, setModalOpen] = useState(false)\n  const {step} = useContext(GlobalContext)\n  const [addStep, setAddStep] = step\n  const [currentIndex, setCurrentIndex] = useState()\n  const [emailAdded, setEmailAdded] = useState(false)\n  const [daySetter, setDaySetter] = useState(0)\n  const [stepSetter, setStepSetter] = useState(0)\n  const [stepBtn, setBtn] = useState(true)\n  \n  useEffect(() => {\n    newStep()\n  }, [])\n\n  function toggleEditor(index){\n    setEditorOpen(!editorOpen)\n    setCurrentIndex(index)\n  }\n\n  function toggleModal(){\n    setModalOpen(!modalOpen)\n  }\n\n  function newStep(){\n    const data = {\n      stepNumber: stepSetter + 1,\n      day: daySetter + 1,\n      dayGap: daySetter + 1,\n      hour: 0,\n      hourGap: 0,\n      minute: 0,\n      minuteGap: 0,\n      mails: [],\n      days: [\"SUN\", \"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\"]\n    }\n    setAddStep(addStep => [...addStep, data]) \n    setDaySetter(daySetter + 1);\n    setStepSetter(stepSetter + 1);\n  }\n\n  const handleCallback = (subject, email_content) => {\n    const data = {\n      subject: subject,\n      email_content: email_content\n    }\n    let newArr = [...addStep]\n    addStep[currentIndex].mails.push(data)\n    setAddStep(newArr)\n    checkr(currentIndex)\n      setEmailAdded(!emailAdded)\n  }\n\n  function removeStep(index){\n    const list = [...addStep];\n    list.splice(index, 1);\n    setDaySetter(daySetter - 1);\n    setStepSetter(stepSetter - 1);\n    list.forEach((e, i) => {\n      e.stepNumber = i + 1\n      e.day = i + 1\n      e.dayGap = i + 1\n    })\n    console.log(list)\n    setAddStep(list);\n  }\n\n  const checkr = (index) => {\n    if (addStep[index].mails.length !== 0){\n    }\n    else{\n    console.log(false)}\n  }\n\n  const addStepBetween = (index) => {\n    const list = [...addStep];\n    const data = {\n      stepNumber: (index + 1) + 1,\n      day: (index + 1) + 1,\n      dayGap: (index + 1) + 1,\n      hour: 0,\n      hourGap: 0,\n      minute: 0,\n      minuteGap: 0,\n      mails: [],\n    }\n    list.splice(index + 1, 0, data)\n    list.forEach((e, i) => {\n      e.stepNumber = i + 1\n      e.day = i + 1\n      e.dayGap = i + 1\n    })\n    setAddStep(list)\n    setDaySetter(daySetter + 1);\n    setStepSetter(stepSetter + 1);\n  }\n\n  return(\n    <div class=\"campaign-create\">\n      <Sidebar/>\n      {editorOpen===true ? <EmailEditor currentIndex={currentIndex} handleCallback={handleCallback}/> : console.log('null')}\n      <Topbar title={\"Campaigns\"}/>\n        <div className=\"campaign-create__container\">\n          <ProgressBar prevStep={props.prevStep} nextStep={props.nextStep} progress={props.progress}/>\n        {addStep.map((d, index) => \n             <>\n             <div className=\"timeline\">\n\n                <div key={index} className=\"campaign-create__container--step\">\n                  <div className=\"row-1\">\n                    <div className=\"row-1__left\">\n                      <h3 key={index} className=\"title\">Step {d.stepNumber}, Day {d.day}</h3>\n                    </div>\n                    <div className=\"campaign-create__container--step--settings\">\n\n                    {addStep[index].mails.length!==0 ? \n                      <div className=\"row-1__right\">\n                        <div className=\"row-1__right--item\"><p>Assigned to: {addStep[index].whichEmail}</p></div>\n                        <div className=\"row-1__right--item\">\n                          {\n                            addStep[index].days.map( d => \n                              <p className=\"days\">{d}</p>\n                           )\n                          }\n                        </div>\n\n                    <button onClick={() => {toggleModal(); setCurrentIndex(index)}} className=\"mail-setter row-1__right--item\">Step Settings</button>\n                      </div>\n                        : null\n                    }\n                    </div>\n                  </div>\n\n                  <div className=\"row-2\">\n                    {addStep[index].mails.length===0 ? \n                      <div className=\"row-2__container\">\n                        <button onClick={() => toggleEditor(index)} className=\"mail-setter\">Add Email</button> \n                          {index === 0 \n                            ? \n                              null\n                            : \n                              <button onClick={() => removeStep(index)} className=\"remove-step\">Remove Step</button>\n                          }\n                      </div>\n                    : \n                    <div className=\"row-2__container\">\n                      <div className=\"email\">\n                      <ToggleSwitch/>\n                        <div className=\"email__info\">\n                          <p className=\"head\">Email</p>\n                          <p>subject: body</p>\n                        </div>\n                      </div>\n                      <div className=\"options\">\n                          {index === 0 \n                            ? \n                              null\n                            : \n                              <button key={index} onClick={() => removeStep(index)} className=\"delete\">Delete Step</button>\n                          }\n                      </div>\n                    </div>\n                    }\n                  </div>\n\n                  {/* <div className=\"row-3\"> */}\n                  {/*   <p className=\"test\">+A/B Test</p> */}\n                  {/* </div> */}\n                </div>\n\n                {addStep.length !== index + 1? <button onClick={() => addStepBetween(index)} className=\"add-sec\"><i class=\"fas fa-plus-circle\"></i></button> \n                  : \n                <button onClick={newStep} className=\"add\"><i class=\"fas fa-plus\"></i></button>\n                }\n             </div>\n             </>\n            )}\n        </div>\n      { modalOpen ? <StepSettingsModal toggler={toggleModal} index={currentIndex}/> : null}\n    </div>\n  )\n\n}\n\nexport default  CampaignSteps\n"]},"metadata":{},"sourceType":"module"}