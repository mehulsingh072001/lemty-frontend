{"ast":null,"code":"var _jsxFileName = \"/home/lucifer/Projects/softwares/lemty/client/src/Pages/Campaign/Create.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from 'react';\nimport CampaignSteps from '../../Components/CampaignComponents/CampaignSteps';\nimport CampaignSettings from '../../Components/CampaignComponents/CampaignSettings';\nimport AddProspect from '../../Components/CampaignComponents/AddProspect';\nimport { GlobalContext } from '../../GlobalProvider';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport { useNavigate } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cookies = new Cookies();\n\nfunction Create() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    campaignBar,\n    campaign,\n    selectedCampaign\n  } = useContext(GlobalContext);\n  const [progress, setProgress] = campaignBar;\n  const [campaignData, setCampaignData] = campaign;\n  const [campaignId, setCampaignId] = selectedCampaign;\n\n  const prevStep = () => {\n    setProgress(progress - 1);\n  };\n\n  const nextStep = () => {\n    setProgress(progress + 1);\n  };\n\n  const saveAndExitCampaign = () => {\n    const headers = {\n      'Authorization': `Bearer ${cookies.get(\"access_token\")}`\n    };\n\n    if (campaignId === \"\") {\n      axios.post(`/campaigns/${cookies.get(\"userId\")}`, campaignData, {\n        headers: headers\n      }).then(res => {\n        if (res.status === 201) {\n          setCampaignId(res.data.id);\n          navigate(\"/campaigns\");\n        }\n      });\n    } else {\n      axios.put(`/campaigns/${campaignId}`, campaignData, {\n        headers: headers\n      }).then(res => {\n        if (res.status === 200) {\n          navigate(\"/campaigns\");\n        }\n      });\n    }\n  };\n\n  const saveCampaign = () => {\n    const headers = {\n      'Authorization': `Bearer ${cookies.get(\"access_token\")}`\n    };\n\n    if (campaignId === \"\") {\n      axios.post(`/campaigns/${cookies.get(\"userId\")}`, campaignData, {\n        headers: headers\n      }).then(res => {\n        if (res.status === 201) {\n          setCampaignId(res.data.id);\n        }\n      });\n    } else {\n      axios.put(`/campaigns/${campaignId}`, campaignData, {\n        headers: headers\n      }).then(res => {\n        if (res.status === 200) {\n          console.log(res.data.id);\n        }\n      });\n    }\n  };\n\n  switch (progress) {\n    case 0:\n      return /*#__PURE__*/_jsxDEV(CampaignSteps, {\n        nextStep: nextStep,\n        prevStep: prevStep,\n        saveExit: saveAndExitCampaign,\n        saveCampaign: saveCampaign\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this);\n\n    case 1:\n      return /*#__PURE__*/_jsxDEV(CampaignSettings, {\n        nextStep: nextStep,\n        prevStep: prevStep,\n        saveExit: saveAndExitCampaign,\n        saveCampaign: saveCampaign\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this);\n\n    case 2:\n      return /*#__PURE__*/_jsxDEV(AddProspect, {\n        nextStep: nextStep,\n        prevStep: prevStep\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this);\n\n    default:\n      return progress;\n  }\n}\n\n_s(Create, \"WjP5yhUk1E2tTo98lmWjoFuADas=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["/home/lucifer/Projects/softwares/lemty/client/src/Pages/Campaign/Create.js"],"names":["useState","useContext","useEffect","CampaignSteps","CampaignSettings","AddProspect","GlobalContext","axios","Cookies","useNavigate","cookies","Create","navigate","campaignBar","campaign","selectedCampaign","progress","setProgress","campaignData","setCampaignData","campaignId","setCampaignId","prevStep","nextStep","saveAndExitCampaign","headers","get","post","then","res","status","data","id","put","saveCampaign","console","log"],"mappings":"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","sourcesContent":["import {useState, useContext, useEffect} from 'react'\nimport CampaignSteps from '../../Components/CampaignComponents/CampaignSteps'\nimport CampaignSettings from '../../Components/CampaignComponents/CampaignSettings'\nimport AddProspect from '../../Components/CampaignComponents/AddProspect'\nimport { GlobalContext } from '../../GlobalProvider'\nimport axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport { useNavigate } from 'react-router'\n\n\nconst cookies = new Cookies();\nfunction Create(){\n  const navigate = useNavigate()\n  const {campaignBar, campaign, selectedCampaign} = useContext(GlobalContext)\n  const [progress, setProgress] = campaignBar\n  const [campaignData, setCampaignData] = campaign\n  const [campaignId, setCampaignId] = selectedCampaign\n\n  const prevStep = () => {\n    setProgress(progress - 1)\n  }\n\n  const nextStep = () => {\n    setProgress(progress + 1)\n  }\n\n  const saveAndExitCampaign = () => {\n    const headers = {\n      'Authorization': `Bearer ${cookies.get(\"access_token\")}`\n    }\n    if(campaignId === \"\"){\n      axios.post(`/campaigns/${cookies.get(\"userId\")}`, campaignData, {headers: headers}).then((res) => {\n        if(res.status===201){\n          setCampaignId(res.data.id)\n          navigate(\"/campaigns\")\n        }\n      })\n    }\n    else {\n      axios.put(`/campaigns/${campaignId}`, campaignData, {headers: headers}).then((res) => {\n        if(res.status===200){\n          navigate(\"/campaigns\")\n        }\n      })\n    }\n  }\n\n  const saveCampaign = () => {\n    const headers = {\n      'Authorization': `Bearer ${cookies.get(\"access_token\")}`\n    }\n    if(campaignId === \"\"){\n      axios.post(`/campaigns/${cookies.get(\"userId\")}`, campaignData, {headers: headers}).then((res) => {\n        if(res.status===201){\n          setCampaignId(res.data.id)\n        }\n      })\n    }\n    else {\n      axios.put(`/campaigns/${campaignId}`, campaignData, {headers: headers}).then((res) => {\n        if(res.status===200){\n          console.log(res.data.id)\n        }\n      })\n    }\n  }\n\n\n  switch(progress){\n    case 0: \n      return(\n        <CampaignSteps nextStep={nextStep} prevStep={prevStep} saveExit={saveAndExitCampaign} saveCampaign={saveCampaign}/>\n      )\n    case 1:\n      return(\n        <CampaignSettings \n          nextStep={nextStep} \n          prevStep={prevStep} \n          saveExit={saveAndExitCampaign} \n          saveCampaign={saveCampaign}\n        />\n      )\n    case 2:\n      return(\n        <AddProspect nextStep={nextStep} prevStep={prevStep}/>\n      )\n    default:\n      return progress\n  }\n}\n\nexport default Create\n"]},"metadata":{},"sourceType":"module"}