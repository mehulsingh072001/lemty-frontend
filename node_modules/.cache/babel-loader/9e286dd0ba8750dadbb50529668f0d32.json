{"ast":null,"code":"var _jsxFileName = \"/home/lucifer/Projects/softwares/lemty/client/src/Components/UserDataModal/UserDataModal.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport UserDataProgress from \"./UserDataProgress\";\nimport { useNavigate, Navigate } from \"react-router\";\nimport axios from \"axios\";\nimport { GlobalContext } from \"../../GlobalProvider\";\nimport Cookies from 'universal-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cookies = new Cookies();\n\nfunction UserDataModal() {\n  _s();\n\n  let navigate = useNavigate();\n  const [progress, setProgress] = useState(1);\n  const [name, setName] = useState('');\n  const [companyName, setCompanyName] = useState('');\n  const [phonenumber, setPhonenumber] = useState('');\n  const url = \"http://localhost:8080/api\";\n  const {\n    userData\n  } = useContext(GlobalContext);\n  const [userDataModal, setUserDataModal] = userData;\n\n  const prevStep = () => {\n    setProgress(progress !== 0 ? progress - 1 : null);\n  };\n\n  const nextStep = () => {\n    setProgress(progress !== 2 ? progress + 1 : null);\n  };\n\n  const oauthSignIn = e => {\n    e.preventDefault();\n    const accessType = \"access_type=offline&\";\n    const response_type = \"response_type=code&\";\n    const include_granted_scopes = \"include_granted_scopes=true&\"; // const scope = \"scope=https://www.googleapis.com/auth/gmail.compose&\";\n\n    const scopeArray = \"https://mail.google.com/ https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/gmail.settings.basic\";\n    const arrayStr = encodeURIComponent(scopeArray);\n    const scope = \"scope=\" + arrayStr + \"&\";\n    const redirect_uri = \"redirect_uri=http://localhost:3000/redirect&\"; // const client_id = \"client_id=1087727582839-72qgrk3g3ea46kq65coo7lbgg3f5cteg.apps.googleusercontent.com&\";\n\n    const client_id = \"client_id=307389897412-pbnocnvetdi59gd76kgt2ai5a2oma9c6.apps.googleusercontent.com&\"; // const client_id = \"client_id=113767487725438512060&\";\n\n    const auth_url = \"https://accounts.google.com/o/oauth2/v2/auth?\" + scope + accessType + include_granted_scopes + response_type + redirect_uri + client_id;\n    console.log(scope);\n    var newWindow = window.open(auth_url, null, 'height=500,width=450');\n    newWindow.focus();\n  };\n\n  const close = () => {\n    setUserDataModal(!userDataModal);\n  };\n\n  const submitDetails = () => {\n    const token = cookies.get(\"access_token\");\n    const user_id = cookies.get(\"userId\");\n    console.log(token);\n    const data = {\n      name: name,\n      company_name: companyName,\n      phone_number: phonenumber\n    };\n    axios.put(`${url}/users/update/${user_id}`, data, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res);\n    }).catch(res => {\n      console.log(res);\n    });\n  };\n\n  switch (progress) {\n    case 1:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-data-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: close,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-data-modal__modal\",\n          children: [/*#__PURE__*/_jsxDEV(UserDataProgress, {\n            progress: progress,\n            prevStep: prevStep,\n            nextStep: nextStep\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Name\",\n              onChange: e => setName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Company Name\",\n              onChange: e => setCompanyName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Phone Number\",\n              onChange: e => setPhonenumber(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: submitDetails,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this);\n\n    case 2:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-data-modal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-data-modal__modal\",\n          children: [/*#__PURE__*/_jsxDEV(UserDataProgress, {\n            progress: progress,\n            prevStep: prevStep,\n            nextStep: nextStep\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: oauthSignIn,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this);\n\n    default:\n      break;\n  }\n}\n\n_s(UserDataModal, \"Eg38yTLA67ihIyVmVdDVffzVWkk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = UserDataModal;\nexport default UserDataModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserDataModal\");","map":{"version":3,"sources":["/home/lucifer/Projects/softwares/lemty/client/src/Components/UserDataModal/UserDataModal.js"],"names":["useState","useContext","UserDataProgress","useNavigate","Navigate","axios","GlobalContext","Cookies","cookies","UserDataModal","navigate","progress","setProgress","name","setName","companyName","setCompanyName","phonenumber","setPhonenumber","url","userData","userDataModal","setUserDataModal","prevStep","nextStep","oauthSignIn","e","preventDefault","accessType","response_type","include_granted_scopes","scopeArray","arrayStr","encodeURIComponent","scope","redirect_uri","client_id","auth_url","console","log","newWindow","window","open","focus","close","submitDetails","token","get","user_id","data","company_name","phone_number","put","headers","then","res","catch","target","value"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\"\nimport UserDataProgress from \"./UserDataProgress\"\nimport { useNavigate, Navigate } from \"react-router\"\nimport axios from \"axios\"\nimport {GlobalContext} from \"../../GlobalProvider\";\nimport Cookies from 'universal-cookie';\n\nconst cookies = new Cookies();\nfunction UserDataModal() {\n  let navigate = useNavigate()\n  const [progress, setProgress] = useState(1)\n  const [name, setName] = useState('')\n  const [companyName, setCompanyName] = useState('')\n  const [phonenumber, setPhonenumber] = useState('')\n  const url = \"http://localhost:8080/api\"\n  const {userData} = useContext(GlobalContext)\n  const [userDataModal, setUserDataModal] = userData\n\n  const prevStep = () => {\n    setProgress(progress!==0 ? progress - 1 : null)\n  }\n\n  const nextStep = () => {\n    setProgress(progress!==2 ? progress + 1 : null)\n  }\n\n  const oauthSignIn = (e) => {\n    e.preventDefault()\n    const accessType = \"access_type=offline&\";\n    const response_type = \"response_type=code&\";\n    const include_granted_scopes = \"include_granted_scopes=true&\";\n    // const scope = \"scope=https://www.googleapis.com/auth/gmail.compose&\";\n    const scopeArray = \"https://mail.google.com/ https://www.googleapis.com/auth/gmail.compose https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/gmail.settings.basic\";\n    const arrayStr = encodeURIComponent(scopeArray)\n    const scope = \"scope=\"+arrayStr+\"&\"\n    const redirect_uri = \"redirect_uri=http://localhost:3000/redirect&\";\n    // const client_id = \"client_id=1087727582839-72qgrk3g3ea46kq65coo7lbgg3f5cteg.apps.googleusercontent.com&\";\n    const client_id = \"client_id=307389897412-pbnocnvetdi59gd76kgt2ai5a2oma9c6.apps.googleusercontent.com&\";\n    // const client_id = \"client_id=113767487725438512060&\";\n    const auth_url = \"https://accounts.google.com/o/oauth2/v2/auth?\"+scope+accessType+include_granted_scopes+response_type+redirect_uri+client_id;\n    console.log(scope)\n    var newWindow = window.open(auth_url, null, 'height=500,width=450')\n    newWindow.focus()\n  }\n\n  const close = () => {\n      setUserDataModal(!userDataModal)\n  }\n  const submitDetails = () => {\n    const token = cookies.get(\"access_token\")\n    const user_id = cookies.get(\"userId\")\n    console.log(token)\n    const data = {\n      name: name,\n      company_name: companyName,\n      phone_number: phonenumber\n    }\n\n    axios.put(`${url}/users/update/${user_id}`, data, {\n      headers:{\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then((res) => {\n      console.log(res)\n    }).catch((res) => {\n      console.log(res)\n    })\n  }\n\n  switch(progress){\n    case 1:\n      return(\n        <div className=\"user-data-modal\">\n          <button onClick={close}>&times;</button>\n          <div className=\"user-data-modal__modal\">\n            <UserDataProgress progress={progress} prevStep={prevStep} nextStep={nextStep}/>\n            <form action=\"\">\n              <input type=\"text\" placeholder=\"Name\" onChange={(e) => setName(e.target.value)}/>\n              <input type=\"text\" placeholder=\"Company Name\" onChange={(e) => setCompanyName(e.target.value)}/>\n              <input type=\"text\" placeholder=\"Phone Number\" onChange={(e) => setPhonenumber(e.target.value)}/>\n            </form>\n            <button onClick={submitDetails}>Submit</button>\n          </div>\n        </div>\n      )\n\n    case 2:\n      return(\n        <div className=\"user-data-modal\">\n          <div className=\"user-data-modal__modal\">\n            <UserDataProgress progress={progress} prevStep={prevStep} nextStep={nextStep}/>\n            <form action=\"\">\n              <input type=\"email\" placeholder=\"Email\"/>\n              <button onClick={oauthSignIn}>Submit</button>\n            </form>\n          </div>\n        </div>\n      )\n    default:\n      break;\n  }\n\n}\n\nexport default UserDataModal\n"]},"metadata":{},"sourceType":"module"}